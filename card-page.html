<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<h1 id="root">Card Search Results</h1>
<div id="card-name-container"></div>
<div id ="card-object"></div>
<!-- <button id="add-card">Add Card to a Deck</button> -->
<div id = "decks-container"></div>
<form action="/index.html" name="home" id="home-button">
    <button>Home</button>
</form>

    <script>
   
        const cardObjectContainer = document.getElementById('card-object')
        const cardNameHeader = document.getElementById('card-name-container')
        // const addCardButton = document.getElementById('add-card')
        const queryString = window.location.search
        const urlParams = new URLSearchParams(queryString)
        
        const root = document.getElementById('root')

        const name = urlParams.get('card')

        cardNameHeader.innerText = name
   

    const showCard = (name) => {
            // console.log(name)
	        fetch(`http://localhost:8000/card/${name}`)
            .then(res => res.json())
            // .then((data)=> console.log(data))
            .then((data)=>onGetCardSuccess(data))
            .catch(err => console.error(err))
          
}

const onGetCardSuccess = (card) => { //the parameter doesn't have a value
        console.log(card.card)
        const foundCard = document.createElement('div')
        foundCard.classList.add('card-display')
        foundCard.innerHTML = `
        <img src = "https://arkhamdb.com/${card.card.imagesrc}" >
        <p>${card.card.text}
        `
        console.log(foundCard)
        foundCard.setAttribute('data-url',card)
        cardObjectContainer.appendChild(foundCard)
    }
        
showCard(name)


//Deck Add button maybe
const indexDeck = () => {
    return fetch(`http://localhost:8000/deck`,{
    // headers: {
    //     'Authorization': `Bearer ${store.userToken}`
    // }
})
}
// addCardButton.addEventListener('click', indexDeck)

    </script>

</body>
</html>